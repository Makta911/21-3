{% extends 'catalog/base.html' %}
{% block content %}
<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card shadow-sm">
                <div class="card-header bg-primary text-white">
                    <h4 class="card-title mb-0">
                        {% if object %}–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ{% else %}–°–æ–∑–¥–∞–Ω–∏–µ{% endif %} –ø—Ä–æ–¥—É–∫—Ç–∞
                    </h4>
                </div>

                <div class="card-body">
                    {% if form.errors %}
                    <div class="alert alert-danger">
                        <h5 class="alert-heading">–û—à–∏–±–∫–∏ –≤ —Ñ–æ—Ä–º–µ:</h5>
                        <ul class="mb-0">
                        {% for field in form %}
                            {% for error in field.errors %}
                                <li><strong>{{ field.label }}:</strong> {{ error }}</li>
                            {% endfor %}
                        {% endfor %}
                        </ul>
                    </div>
                    {% endif %}

                    <form method="post" enctype="multipart/form-data">
                        {% csrf_token %}

                        <!-- –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞ -->
                        <div class="mb-4">
                            <label for="{{ form.name.id_for_label }}" class="form-label fw-bold">
                                –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞ *
                            </label>
                            {{ form.name }}
                            <div class="form-text">–£–∫–∞–∂–∏—Ç–µ –∫—Ä–∞—Ç–∫–æ–µ –∏ –ø–æ–Ω—è—Ç–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ</div>
                        </div>

                        <!-- –û–ø–∏—Å–∞–Ω–∏–µ -->
                        <div class="mb-4">
                            <label for="{{ form.description.id_for_label }}" class="form-label fw-bold">
                                –û–ø–∏—Å–∞–Ω–∏–µ
                            </label>
                            {{ form.description }}
                            <div class="form-text">–û–ø–∏—à–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –∏ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞</div>
                        </div>

                        <!-- –¶–µ–Ω–∞ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è –≤ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ -->
                        <div class="row mb-4">
                            <div class="col-md-6">
                                <label for="{{ form.price.id_for_label }}" class="form-label fw-bold">
                                    –¶–µ–Ω–∞ *
                                </label>
                                <div class="input-group">
                                    {{ form.price }}
                                    <span class="input-group-text">‚ÇΩ</span>
                                </div>
                                {% if form.price.errors %}
                                    <div class="text-danger small mt-1">
                                        {% for error in form.price.errors %}
                                            {{ error }}
                                        {% endfor %}
                                    </div>
                                {% endif %}
                            </div>

                            <div class="col-md-6">
                                <label for="{{ form.category.id_for_label }}" class="form-label fw-bold">
                                    –ö–∞—Ç–µ–≥–æ—Ä–∏—è
                                </label>
                                {{ form.category }}
                            </div>
                        </div>
                        <div class="mb-4">
                            <label for="{{ form.manufactured_at.id_for_label }}" class="form-label fw-bold">
                                –î–∞—Ç–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ *
                            </label>
                            {{ form.manufactured_at }}
                            {% if form.manufactured_at.errors %}
                                <div class="text-danger small mt-1">
                                    {% for error in form.manufactured_at.errors %}
                                        {{ error }}
                                    {% endfor %}
                                </div>
                            {% endif %}
                            <div class="form-text">–£–∫–∞–∂–∏—Ç–µ –¥–∞—Ç—É –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ –ø—Ä–æ–¥—É–∫—Ç–∞</div>
                        </div>

                        <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ -->
                        <div class="mb-4">
                            <label for="{{ form.image.id_for_label }}" class="form-label fw-bold">
                                –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞
                            </label>
                            {{ form.image }}
                            {% if object.image %}
                                <div class="mt-2">
                                    <small>–¢–µ–∫—É—â–µ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ:</small>
                                    <img src="{{ object.image.url }}" alt="{{ object.name }}" class="img-thumbnail mt-1" style="max-height: 100px;">
                                </div>
                            {% endif %}
                        </div>

                        <!-- –ü—É–±–ª–∏–∫–∞—Ü–∏—è -->
                        <div class="mb-4">
                            <div class="form-check">
                                {{ form.is_published }}
                                <label for="{{ form.is_published.id_for_label }}" class="form-check-label fw-bold">
                                    –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –ø—Ä–æ–¥—É–∫—Ç
                                </label>
                            </div>
                            <div class="form-text">–ï—Å–ª–∏ –æ—Ç–º–µ—á–µ–Ω–æ, –ø—Ä–æ–¥—É–∫—Ç –±—É–¥–µ—Ç –≤–∏–¥–µ–Ω –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º</div>
                        </div>

                        <!-- –ö–Ω–æ–ø–∫–∏ -->
                        <div class="d-flex gap-2 mt-4 pt-3 border-top">
                            <button type="submit" class="btn btn-success px-4">
                                –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                            </button>
                            <a href="{% url 'catalog:home' %}" class="btn btn-outline-secondary">
                                –û—Ç–º–µ–Ω–∞
                            </a>
                        </div>
                    </form>
                </div>

                <!-- –§—É—Ç–µ—Ä —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π -->
                <div class="card-footer bg-light">
                    <div class="row">
                        <div class="col-md-6">
                            <small class="text-muted">
                                –ü–æ–ª—è –ø–æ–º–µ—á–µ–Ω–Ω—ã–µ * –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è
                            </small>
                        </div>
                        <div class="col-md-6 text-end">
                            <small class="text-muted">
                                <strong>–ó–∞–ø—Ä–µ—â–µ–Ω–Ω—ã–µ —Å–ª–æ–≤–∞:</strong> –∫–∞–∑–∏–Ω–æ, –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞, –∫—Ä–∏–ø—Ç–∞, –±–∏—Ä–∂–∞, –¥–µ—à–µ–≤–æ, –±–µ—Å–ø–ª–∞—Ç–Ω–æ, –æ–±–º–∞–Ω, –ø–æ–ª–∏—Ü–∏—è, —Ä–∞–¥–∞—Ä
                            </small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% if not user.is_authenticated %}
<div class="alert alert-warning mt-4">
    <h5>üîí –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</h5>
    <p class="mb-2">–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É.</p>
    <a href="{% url 'users:login' %}?next={{ request.path }}" class="btn btn-warning btn-sm">–í–æ–π—Ç–∏</a>
    <a href="{% url 'users:register' %}" class="btn btn-outline-warning btn-sm">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a>
</div>
{% endif %}
{% endblock %}